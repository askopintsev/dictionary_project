# Документация сервиса терминологии

## Установка сервиса
Чтобы запустить сервис необходимо выполнить следующие условия:

1. Установить интерпретатор Python 3.
   - если интерпретатор отсутствует, пройдите по ссылке Python.org и 
   следуйте инструкциям установщика.
1. Окружение Python должно соответствовать требованиям запуска сервиса. 
Требования указаны в файле requirements.txt в каталоге сервиса.
   - для установки необходимых библиотек можно воспользоваться менеджером пакетов, с помощью команды: pip install -r requirements.txt

1. Запустить сервер Django через командную строку, 
находясь в директории сервиса, с помощью команды: python manage.py runserver

1. *Опциально. Перейти по ссылке http://localhost:8000/,
 чтобы открыть стартовую страницу сервиса для проверки работоспособности.
 
1. Для работы с API необходимо воспользоваться соответствующими клиентами,
например: SoapUI, Postman и их аналоги.

## Документация API сервиса

API сервиса терминологии предоставляет следующие возможности:

- получение информации о справочниках:

   - полный список справочников
   - список справочников актуальных на указанную дату
   
- получение информации об элементах справочника:

   - получение элементов заданного справочника текущей версии
   - валидация элементов заданного справочника текущей версии
   - получение элементов заданного справочника указанной версии
   - валидация элемента заданного справочника по указанной версии
   
Для управления данными доступен интерфейс администратора по адресу:
http://localhost:8000/admin/, где доступно:

- добавление/изменение/удаление данных о справочниках и их версиях
- добавление/изменение/удаление данных об элементах справочников
   
### Доступные методы API
Все методы API используют пагинацию ответов по 10 элементов на странице.

1) **URL: <host>/api/dictionaries/**

   **GET** метод

    Принимает параметры:
    -  start_date (необязательный) - ожидается строка с указанием даты в формате "YYYY-MM-DD"
    
    Возвращаемые данные:
    
    - если параметр start_date был заполнен - список справочников, актуальных на указанную дату
    - если параметр start_date был пустой - список всех справочников
    
    Пример возвращаемого ответа:
    
        {
        "count": 2,
        "next": null,
        "previous": null,
        "results": [
            {
                "id": 4,
                "name": "Documents",
                "short_name": "Docs",
                "description": "Свободный фреймворк для веб-приложений на языке Python",
                "version": "4",
                "start_date": "2021-02-01T03:00:00+03:00"
            },
            {
                "id": 6,
                "name": "Company",
                "short_name": "Cmp",
                "description": "Свободный фреймворк для веб-приложений на языке Python",
                "version": "2",
                "start_date": "2021-01-01T03:00:00+03:00"
            }
        ]
        }

1) **URL: <host>/api/elements/**

   **GET** метод

    Принимает параметры:
    - parent_dict (обязательный) - ожидается строка с наименованием справочника,
     элементы которого требуется получить
    - version (необязательный) - ожидается номер версии справочника, 
    по которой требуется получить элементы. Если не заполнено - берется актуальная версия.
    - element_code (необязательный) - ожидается код элемента, по которому будет проведена 
    проверка наличия этого элемента в запрашиваемом справочнике запрашиваемой версии
    
    Возвращаемые данные:
    - если параметр version был заполнен - список элементов укзанного в параметре
    parent_dict справочника указанной версии
    - если параметр version был пустой - список элементов укзанного в параметре
    parent_dict справочника актуальной версии
    - если параметр element_code был заполнен - возвращается список с указанием 
    единственного элемента, запрошенного в параметре. Если возвращается пустой список - 
    значит элемент в справочнике выбранной версии отсутствует.
    
    Пример возвращаемого ответа:
    
        {
        "count": 2,
        "next": null,
        "previous": null,
        "results": [
                    {
                        "element_code": "Doc1",
                        "value": "passport"
                    },
                    {
                        "element_code": "Doc2",
                        "value": "Driver license"
                    }
                    ]
        }
